# 12 함수

## 12.1 함수란?
프로그래밍 언어의 함수는 일련의 과정을 문으로 구현하고 코드 블록으로 감싸서 하나의 실행 단위로 정의한 것.

함수는 **변수(parameter)**, **인수(argument)**, **반환값(value)**로 구성된다.

함수는 함수 정의를 통해 생성된다.
함수를 정의 하는 방법은 여러가지가 있지만 대표적으로 함수 선언문을 통해 함수를 정의하는 방법을 사용한다.

**함수 호출** : 인수를 매개변수를 통해 함수에 전달하면서 함수의 실행을 명시적으로 지시하는 것.

## 12.2 함수를 사용하는 이유
- 함수는 실행 시점을 개발자가 결정할 수 있고 몇 번이나 재사용이 가능하다.
- 유지보수의 편의성과 코드의 신뢰성을 높임, 또한 코드의 가독성을 향상 시킨다.

## 12.3 함수 리터럴
- 자바스크립트의 함수는 객체 타입의 값이다. 따라서 함수도 함수 리터럴로 생성할 수 있다.
- 함수 리터럴의 구성요소
  - **함수 이름** : 식별자로 식별자 네이밍 규칙을 준수 해야한다.
  - **매개변수 목록**
  - **함수 몸체**

일반 객체는 호출할 수 없지만 함수는 호출할 수 있고, 함수 객체는 함수 객체만의 고유한 프로퍼티를 가진다.

## 12.4 함수 정의
함수 정의는 함수를 호출하기 전에 인수를 전달받츨 매개변수와 실행할 문들, 반환할 값을 지정하는 것
- **함수 선언문**
- **함수 표현식**
- **function 생성자 함수**
- **화살표 함수(ES6)**

### 함수 선언문
- 함수 선언문은 함수 리터럴과 형태가 동일하지만 함수 이름을 생략할 수 없다.
- 함수 선언문은 표현식이 아닌 문이다. -> **변수에 할당할 수 없다.**

{}는 중의적 표현이기 때문에, 코드의 문맥(피연산자로 사용되는지?)에 따라 함수 선언문 or 함수 리터럴로 해석한다.

### 함수의 호출?
자바스크립트 엔진은 함수 선언문을 해석해 함수 객체를 생성하는데 함수 이름은 함수 몸체 내부에서만 유효한 식별자이므로 함수 객체를 가리키는 식별자(함수 이름과 동일)를 암묵적으로 생성하고 거기에 함수 객체를 할당한다.
- 함수는 함수 이름으로 호출하는 것이 아니라 식별자로 호출하는 것
- 자바스크립트 엔진이 함수 선언문을 함수 표현식으로 변환해 함수 객체를 생성한다고 할 수 있음


### 함수 표현식
**일급 객체** : 값의 성질을 갖는 객체
**함수 표현식** : 함수는 일급 객체이므로 함수 리터럴로 생성한 함수 객체를 변수에 할당할 수 있음
-> 함수 표현식은 익명 함수로 작성하는 것이 일반적(함수 리터럴의 함수 이름을 생략한 것)

### 함수 선언문 VS 함수 표현식
함수 선언문은 **"표현식이 아닌 문"**이고, 함수 표현식은 **"표현식인 문"**이다.

### 함수 생성 시점과 호이스팅
- 모든 선언문이 런타임 이전에 자바스크립트 엔진에 의해 먼저 실행된다.
- 함수 선언문으로 정의한 함수는 함수 선언문 이전에 호출 가능(함수 호이스팅)

### 함수 표현식은 변수에 할당되는 값이 함수 리터럴인 문이다.
- 변수의 값은 런타임에 평가되므로 함수 표현식의 함수 리터럴도 할당문이 실행되는 시점에 평가된다.
- 따라서 함수 표현식으로 함수를 정의하면 함수 호이스팅이 아닌 변수 호이스팅이 발생한다.

### Function 생성자 함수
- Function 생성자 함수에 매개변수 목록과 함수 몸체를 문자열로 전달하면서 new 연산자와 함께 호출한다.(new 연산자 없이 호출해도 결과는 동일)
- Function 생성자 함수로 생성한 함수는 클로저를 생성하지 않는 등, 함수 선언문이나 함수 표현식으로 생성한 함수와 다르게 동작한다.

### 화살표 함수
- ES6에서 도입된 함수로 function 키워드 대신 화살표를 사용해 좀 더 간략한 방법으로 함수를 선언하는 방법이다.
- 화살표 함수는 항상 익명 함수로 정의한다.


## 12.5 함수 호출
함수는 식별자와 함수 호출 연산자(소괄호)로 호출한다.

### 매개변수와 인수
- 매개변수는 함수를 정의할 때 선언, 함수 내부에서 변수와 동일하게 취급된다.
- 매개변수는 함수 몸체 내부에서만 참조할 수 있다.
- 인수는 함수 외부에서 내부로 전달되는 값이다.

일반적으로 매개변수와 인수의 개수를 일치시키지만 일치하지 않아도 상관은 없다
=> 부족한 경우 undefined가 되며 초과된 경우 무시된다.

### 매개 변수의 최대 개수
매개 변수의 개수가 **적을수록** 이상적인 함수에 가까워진다.
이상적인 함수는 한 가지 일만 해야 하며 가급적 작게 만들어야한다.
-> 매개 변수는 **최대 3개** 이상을 넘지 않는 것을 권장한다.
그 이상의 매개변수가 필요하다면 매개변수는 하나만 선언하고 객체를 인수로 전달하는 것이 좋다.
**주의점** : 함수 외부에서 함수 내부로 전달한 객체를 함수 내부에서 변경하면 함수 외부의 객체가 변경되는 부수효과가 발생한다.

### 반환문
함수는 `return` 키워드와 표현식으로 이뤄진 반환문을 사용해 실행 결과를 함수 외부로 반환한다.

반환문은 두 가지 역할을 함.
- 반환문은 함수의 실행을 중단하고 함수 몸체를 빠져나감
- return 키워드 뒤에 오는 표현식을 평가해 반환한다.

반환문은 함수 몸체 내부에서만 사용할 수 있다.

## 12.6 참조에 의한 전달과 외부 상태의 변경
매개변수는 함수 몸체 내부에서 변수와 동일하게 취급되므로 매개변수의 타입에 따라 **값에 의한 전달**, **참조에 의한 전달** 방식을 따른다.

- **값에 의한 전달**의 경우 값 자체가 복사되기 때문에 원본에 대한 어떠한 부수 효과도 발생하지 않는다.
- **참조에 의한 전달** 방식의 경우 참조 값이 복사가 되기 때문에 몸체에서 객체를 변경할 경우 외부의 원본 객체가 변경되는 부수효과가 발생한다.

이를 막기 위해서 **불변 객체**로 만들거나 **깊은 복사**를 통해 새로운 객체를 생성하고 재할당하는 방법이 있다.

**순수 함수** : 외부 상태를 변경하지 않고 외부 상태에 의조하지도 않는 함수
**함수형 프로그래밍** : 순수 함수를 통해 부수효과를 최대한 억제하여 오류를 피하고 프로그램의 안정성을 높이려는 프로그래밍 패러다임

## 12.7 다양한 함수의 형태
### 즉시 실행 함수
즉시 실행 함수는 함수 정의와 동시에 즉시 호출되는 함수
- 단 한 번만 호출되며 다시 호출할 수 없다.
- 익명 함수를 사용하는 것이 일반적
- 반드시 그룹 연산자로 감싸야한다.

### 재귀함수
재귀 함수는 함수가 자기 자신을 호출하는 재귀호출을 수행하는 함수
- 반복되는 처리를 위해 사용된다.
- 재귀함수는 자신을 무한 재귀 호출하므로 반드시 탈출 조건을 만들어야 한다.(탈출 조건이 없으면 **스택 오버플로**가 발생)

### 중첩 함수
중첩 함수는 함수 내부에 정의된 함수로 **내부 함수**라고도 한다. 또한 중첩 함수를 포함하는 함수는 **외부 함수**라 한다.

### 콜백 함수
- 콜백 함수는 함수의 매개 변수를 통해 다른 함수의 내부로 전달되는 함수
- 콜백 함수를 전달받은 함수를 **고차 함수**라고 한다.
- 고차 함수는 외부에 있는 콜백 함수를 자신의 일부분으로 합성한다.
- 콜백 함수는 고차함수에 의해 호출되며, 고차 함수는 필요에 따라 콜백 함수에 인수를 전달할 수 있다.

### 순수 함수와 비순수 함수
**순수 함수** 
- 외부의 상태에 의존하지 않고 내부 상태에만 의존하며 부수 효과가 없는 함수
- 오직 매개변수를 통해 함수 내부로 전달된 인수에게만 의존해 값을 생성 후 반환한다.
**비순수 함수**
외부상태에 영향을 받으며 부수 효과가 있는 함수
- 외부 상태에 따라 반환값이 결정된다.
- 함수 내부 상태에만 의존한다 해도 호출될 때마다 **값이 변한다면** 비순수 함수다.