# 49장 Babel과 Webpack을 이요한 ES6+/ES.NEXT 개발 환경 구축
- 브라우저마다 ES6와 그 이상의 버전의 지원율이 제각각임
- 경우에 따라 모든 브라우저에서 동작시키기 위한 개발 환경을 구축해야함
- 대부분의 프로젝트가 모듈을 사용하므로 모듈 로더도 필요
  - ESM은 대부분의 모던 브라우저에서 사용할 수 있지만, 다음과 같은 이유로 아직까지는 별도의 모듈 로더를 사용하는 것이 일반적
    - IE를 포함한 구형 브라우저는 ESM을 지원하지 않음
    - ESM 사용하더라도 트랜스파일링이나 번들링이 필요한 것은 변함이 없음
    - ESM이 아직 지원하지 않는 기능이 있고 점차 해결되고는 있지만 아직 몇 가지 이슈가 존재.
  - 트랜스 파일러 : Babel
  - 모듈 번들러 : Webpack

## 49.1 Babel
- IE 같은 구형 브라우저에서는 ES6의 화살표 함수와 ES7의 지수 연산자를 지원하지 않을 수 있음
  - Babel을 사용하면 ES5 사양으로 변환 가능
  - Babel은 ES6+/ES.NEXT로 구현된 최신 사양의 소스코드를 IE 같은 구형 브라우저에서도 동작하는 ES5 사양의 소스코드로 변환(트랜스 파일링)가능

### 49.1.1 Babel 설치
- npm에서 설치 가능, 몇 가지 명령어를 통해 Babel 설치(책 참조)

### 49.1.2 Babel 프리셋 설치와 babel.config.json 설정 파일 작성
- Babel을 사용하려면 @babel/preset-env(Babel 프리셋)를 설치해야함
- @babel/preset-env는 필요한 프러그인들을 프로젝트 지원 환경에 맞춰 동적으로 결정해줌
  - 프로젝트 지원 환경은 Browserlist 형식으로 .browserlistrc 파일에 상세히 설정 가능
  - 프로젝트 지원 환경 설정 작업을 생략하면 기본값으로 설정된다.
- 설치 후 프로젝트 루트 폴더에 babel.config.json 설정 파일을 생성, 다음과 같이 작성(@babel/preset-env를 사용하겠다는 의미)
  - `{ "presets" : ["@babel/preset-env"] }`

### 49.1.3 트랜스파일링
- npm scripts에 Babel CLI 명령어 등록
- 트랜스파일링 테스트 진행(ES6+/ES.NEXT 사양의 자바스크립트 파일 작성, 실행)
- 2021년 9월 기준 private 필드 정의 제안에서 에러 발생으로 인한 별도의 플러그인 설치 필요

### 49.1.4 Babel 플러그인 설치
- Babel 홈페이지에서 public/private 클래스 필드를 지원하는 @babel/plugin-proposal-class-properties 설치
- `$ npm install __save-dev @babel/plugin-proposal-class-properties`
- 설치 후 babel.config.json 설 정 파일에 추가

### 49.1.5 브라우저에서 모듈 로딩 테스트
- 브라우저는 CommonJS 방식의 require 함수를 지원하지 않으므로 트랜스파일링된 결과를 그대로 브라우저에서 실행하면 에러가 발생
- Webpack을 통해 문제 해결

## 49.2 WebPack
- Webpack : 의존 관계에 있는 자바스크립트, CSS, 이미지 등의 리소스들을 하나(또는 여러 개)의 파일로 번들링 하는 모듈 번들러
- 의존 모듈이 하나의 파일로 번들링 되므로 별도의 모듈 로더가 필요 X
- 여러 개의 자바스크립트 파일을 하나로 번들링하므로 HTML 파일에서 script 태그로 여러 개의 자바스크립트 파일을 로드해야 하는 번거로움도 사라짐

### 49.2.1 Webpack 설치
- 터미널에서 명령어를 입력하여 Webpack 설치
- `$ npm install --save-dev webpack webpack-cli`

### 49.2.2 babel-loader 설치
- Webpack이 모듈을 번들링할 때 Babel을 사용하여 최신 사양의 소스코드를 ES5 사양의 소스코드로 트랜스파일링 하도록 babel-loader를 설치
- `$ npm install --save-dev babel-loader`
- npm script를 변경하여 Babel 대신 Webpack을 실행하도록 수정
  - package.json 파일의 script를 변경

### 49.2.3 webpack.config.js 설정 파일 작성
- webpack.config.js : Webpack이 실행될 때 참조하는 설정 파일
- 프로젝트 루트 폴더에 webpack.config.js 파일을 생성하고 알맞게 작성(책 참조)

### 49.2.4 bable-polyfill 설치
- Babel을 사용해 트랜스파일링해도 지원하지 않는 코드가 남아 있을 수 있음(ex. Promise, Object.assign, Array.from 등)
- 남아 있는 코드를 사용하기 위해 @babel/polyfill 설치
  - `$ npm install @babel/polyfill`
  - 개발 환경이 아닌 실제 운영 환경에서도 사용해야 하므로 --save-dev 옵션 지정 X


