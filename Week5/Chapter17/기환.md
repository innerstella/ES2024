# 17장 생성자 함수에 의한 객체 생성

## 17.1 Object 생성자 함수
- new 연산자와 함께 Object 생성자 함수를 호출하면 빈 객체를 생성하여 반환한다.
- 빈 객체를 생성한 이후 프로퍼티 또는 메서드를 추가하여 객체를 완성할 수 있다.

**생성자 함수?**
- new 연산자와 함께 호출하여 객체를 생성하는 함수
- 생성자 함수에 의해 생성된 객체를 인스턴스라 한다.
- Object 외에도 **String**, **Number**, **Boolean**, **Function**, **Array**, **Date**, **RegExp**, **Promise** 등의 빌트인 생성자 함수가 있다.

**객체를 생성하는 방법은 객체 Object 생성자 함수를 사용하는 것보다 객체 리터럴을 사용하는 것이 특별한 이유가 없다면 더 간편하고 유용하다.**

## 17.2 생성자 함수

### 객체 리터럴에 의한 객체 생성 방식의 문제점
- 객체 리터럴에 의한 객체 생성 방식은 직관적이고 간편하지만 단 하나의 객체만 생성한다는 단점이 있다.
- 프로퍼티 구조가 동일한 여러 개의 객체를 생성한다면 객체 리터럴에 의한 생성 방식은 굉장히 비효율 적이다.

### 생성자 함수에 의한 객체 생성 방식의 장점
- 생성자 함수에 의한 객체 생성 방식은 마치 객체를 생성하기 위한 템플릿처럼 생성자 함수를 사용하여 프로퍼티 구조가 동일한 객체 여러 개를 간편하게 생성할 수 있다.

**new 연산자와 함께 호출해야 한다.(함께 호출하지 않으면 생성자 함수가 아니라 일반 함수로 동작한다.)**

### 생성자 함수의 인스턴스 생성 과정
1. 인스턴스 생성과 this 바인딩-암묵적으로 빈 객체가 생성되고 this에 바인딩된다.-이 처리는 함수 몸체의 코드가 한 줄 씩 실행되는 런타임 이전에 실행된다.
2. 인스턴스 초기화-생성자 함수에 기술되어 있는 코드가 한 줄 씩 실행되어 this에 바인딩되어 있는 인스턴스를 초기화한다.-this에 바인딩되어 있는 인스턴스에 프로퍼티나 메서드를 추가한다.-생성자 함수가 인수로 전달받은 초기값을 인스턴스 프로퍼티에 할당하여 초기화 하거나 고정값을 할당한다.
3. 인스턴스 반환-생성자 함수 내부에서 모든 처리가 끝나면 완성된 인스턴스가 바인딩된 this를 암묵적으로 반환한다.-만약 this가 아닌 다른 객체를 명시적으로 반환하면 this가 반환되지 못하고 return문에 명시한 객체가 반환된다.

### 내부 메서드 `[[Call]]`과 `[[Construct]]`
- 함수는 객체이므로 일반 객체가 가지고 있는 내부 슬롯과 내부 메서드를 모두 가지고 있다.
- 호출 할 수 없는 객체는 함수 객체가 아니므로 함수 객체는 반드시 `[[Call]]`을 갖고 있다.
- 모든 함수 객체가 생성자 함수는 아니므로 `[[Construct]]`를 반드시 갖고 있지는 않다.
- `[[Construct]]`를 가지고 있다면 constructor, 가지고 있지 않다면 non-constructor이다.


### constructor vs non-constructor
자바스크립트 엔진은 함수 객체를 생성할 때 함수 정의 방식에 따라 **constructor**와 **non-constructor**를 구분한다.
- **일반 함수**, 즉 함수 선언문과 함수 표현식으로 정의된 함수만이 constructor이다.
- **화살표함수**와 메서드 축약 표현으로 정의된 함수는 non-contructor이다.

### new 연산자
new 연산자와 함께 함수를 호출하면 해당 함수는 **생성자 함수로 동작**한다.
- new 연산자와 함께 호출 : `[[Constructor]]` 호출
- new 연산자 없이 호출 : `[[Call]]` 호출

### new.target
new.target은 this와 유사하게 contructor인 모든 함수 내부에서 암묵적인 지역 변수와 같이 사용되며, 메타 프로퍼티라고 부른다.
- new 연산자와 함께 생성자 함수로서 호출되면 함수 내부의 new.target은 **함수 자신**을 가리킨다.
- new 연산자 없이 일반 함수로서 호출된 함수 내부의 new.target은 **undefined다**.